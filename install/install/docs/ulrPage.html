<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SIBR: Unstructured Lumigraph Rendering (ULR)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SIBR
   &#160;<span id="projectnumber">0.9.3-50-gf5866f7</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ulrPage.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Unstructured Lumigraph Rendering (<a class="el" href="namespaceULR.html">ULR</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="ulr_intro"></a>
Introduction</h1>
<p>This <em>Project</em> contains three specialized implementations of Unstructured Lumigraph Rendering [Buelher 2001]; we refer the reader to that paper for technical details. In contrast to the original paper, our method blends input images on a <em>per-pixel</em> basis. In a nutshell the rendering apps in this <em>Project</em> first render a depth buffer for the novel (current) view, then for a subset <em>S</em> of input images reproject each visible 3D point into each image in <em>S</em>, and then blend the result according to the blending weights as defined in the original paper.</p>
<p>This <em>Project</em> contains two renderings apps: <code>SIBR_ulr_app</code> which is the original (slow) version, <code>SIBR_ulrv2_app</code> that contains the second and third versions of the <a class="el" href="namespaceULR.html">ULR</a>.</p>
<p>The original version of <a class="el" href="namespaceULR.html">ULR</a> first selects a subset of the original images using angle and position criteria on the CPU, then uses a multi-pass ping-pong shader to rank the 4 best-cost images for each pixel, by storing these four color values and their weights in rendertargets and iteratively updating them while keeping them sorted.</p>
<p>Version 2 removes the need for the ping-pong best-cost image update, by iterating on the selected cameras in one shader. The corresponding images and depth maps are passed as a list of textures. The maximum supported number of cameras is determined by the maximum texture slot count in fragment shaders.</p>
<p>Version 3 stores images and depth maps as texture 2D arrays, and pack all cameras in a uniform buffer object. This allows all cameras to be considered and do the selection entirely on the GPU. The maximum supported number of cameras is determined by the maximum texture array layer count and uniform buffer object size.</p>
<h2><a class="anchor" id="ulr_authors"></a>
Authors</h2>
<p>This <em>Project</em> was written by: Gaurav Chaurasia, Sebastien Bonopera, Theo Thonat, Simon Rodriguez, Sebastien Bonopera, Jerome Esnault, Siddhant Prakashand George Drettakis, who also supervised the entire <em>Project</em>.</p>
<hr  />
<h1><a class="anchor" id="ulr_howToUse"></a>
How to use</h1>
<h2><a class="anchor" id="ulr_howToUse_checkout"></a>
Checkout the code</h2>
<p><a class="el" href="namespaceULR.html">ULR</a> is already available as part of the SIBR Core code. You will need to checkout SIBR Core as mentioned in <a class="el" href="index.html#sibr_checkout">Checkout the code</a> .</p>
<h2><a class="anchor" id="ulr_howToUse_configure"></a>
Configuration</h2>
<p>As for most of the projects, <a class="el" href="namespaceULR.html">ULR</a> can be configured through SIBR Core CMake configuration by selecting <code>SIBR_IBR_ULR</code> variable before running the configuration (see <a class="el" href="index.html#sibr_configure_cmake">Configuring the solution</a>).</p>
<h2><a class="anchor" id="ulr_howToUse_build"></a>
Build &amp; Install</h2>
<p>You can build and install <a class="el" href="namespaceULR.html">ULR</a> via running ALL_BUILD and/or INSTALL in sibr_projects.sln solution (as mentioned in <a class="el" href="index.html#sibr_compile">Compiling</a> Compiling ) or through <code>sibr_ulr*</code> specific targets in sibr_projects.sln solution. Dont forget to build INSTALL if you use ALL_BUILD.</p>
<h2><a class="anchor" id="ulr_howToUse_run"></a>
Run</h2>
<p>After installing <a class="el" href="namespaceULR.html">ULR</a>, several apps should be available in <code>install\bin</code>, notably :</p>
<ul>
<li>sibr_ulr_app.exe (or sibr_ulr_app_d.exe / sibr_ulr_app_rwdi.exe depending on the configuration of the target) : this is the legacy version of <a class="el" href="namespaceULR.html">ULR</a></li>
<li>sibr_ulrv2_app.exe (or sibr_ulrv2_app_d.exe / sibr_ulrv2_app_rwdi.exe depending on the configuration of the target) : this updated version gives you the choice between three different implementations of <a class="el" href="namespaceULR.html">ULR</a> (with GPU optimization and other tweaks)</li>
</ul>
<p>Both can be run by running the executable with a path to a working dataset: </p><pre class="fragment">sibr_ulrv2_app.exe --path PATH_TO_DATASET
</pre><p>For example datasets see below <a class="el" href="ulrPage.html#ulr_howToUse_example_datasets">Example Datasets</a>.</p>
<hr  />
<h2><a class="anchor" id="ulr_howToUse_dataset"></a>
Datasets</h2>
<h3><a class="anchor" id="ulr_howToUse_dataset_structure"></a>
Dataset structure</h3>
<p>A <a class="el" href="namespaceULR.html">ULR</a> dataset only requires standard SfM/MVS data to function: to generate such a dataset from your input images see:</p>
<p><a class="el" href="howto_generate_dataset.html">Dataset Structure and Generation</a></p>
<p>A standard SIBR dataset contains <em>cameras</em> and the <em>mesh</em> required for the algorithm to run; no additional preprocessing is required.</p>
<h3><a class="anchor" id="ulr_howToUse_example_datasets"></a>
Example Datasets</h3>
<p>Some example datasets can be found here: <a href="https://repo-sam.inria.fr/fungraph/sibr-datasets/datasets.html">https://repo-sam.inria.fr/fungraph/sibr-datasets/datasets.html</a></p>
<p>You dan download the <a class="el" href="namespaceULR.html">ULR</a> only package for each dataset. Feel free to download and experiment, for example with (now famous) Museum Front 27 dataset. Goto the install\bin directory:</p>
<div class="fragment"><div class="line">wget https:<span class="comment">//repo-sam.inria.fr/fungraph/sibr-datasets/museum_front27_ulr.zip</span></div>
<div class="line">sibr_ulrv2_app.exe --path museum_front27\sibr_cm</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="ulr_howToUse_run_cliOptions"></a>
CLI options</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">name  </th><th class="markdownTableHeadNone">type  </th><th class="markdownTableHeadNone">Required  </th><th class="markdownTableHeadNone">default value  </th><th class="markdownTableHeadNone">description   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" colspan="5"><b>Basic app options</b>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">appPath  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">"./"  </td><td class="markdownTableBodyNone">define a custom app path   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">help  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">display this help message   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone" colspan="5"><b>Basic window options</b>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">width  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">720  </td><td class="markdownTableBodyNone">initial window width   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">height  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">480  </td><td class="markdownTableBodyNone">initial window height   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">vsync  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">enable vertical sync   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">fullscreen  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">set the window to fullscreen   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">hd  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">rescale UI elements for high-density screens   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">nogui  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">do not use <a class="el" href="namespaceImGui.html">ImGui</a>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">gldebug  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">enable OpenGL error callback   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone" colspan="5"><b>Basic rendering options</b>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">scene  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">"scene_metadata.txt"  </td><td class="markdownTableBodyNone">scene metadata file   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">rendering-size  </td><td class="markdownTableBodyNone">Vector2i  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">{ 0, 0 }  </td><td class="markdownTableBodyNone">size at which rendering is performed   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">texture-width  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">size of the input data in memory   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">texture-ratio  </td><td class="markdownTableBodyNone">float  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">1.0f  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">rendering-mode  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">RENDERMODE_MONO  </td><td class="markdownTableBodyNone">select mono (0) or stereo (1) rendering mode   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">focal-pt  </td><td class="markdownTableBodyNone">Vector3f  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">{ 0.0f, 0.0f, 0.0f }  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">colmap_fovXfovY_flag  </td><td class="markdownTableBodyNone">Switch  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone" colspan="5"><b>Basic dataset options</b>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">path  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">true  </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">path to the dataset root   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dataset_type  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">""  </td><td class="markdownTableBodyNone">type of dataset   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" colspan="5"><b><a class="el" href="namespaceULR.html">ULR</a> specific options</b>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">v  </td><td class="markdownTableBodyNone">int  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">3  </td><td class="markdownTableBodyNone"><a class="el" href="namespaceULR.html">ULR</a> implementation version   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">soft-visibility  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">generate and use soft visibility masks   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">masks  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">use binary masks   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">masks-param  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">""  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">masks-param-extra  </td><td class="markdownTableBodyNone">string  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">""  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">invert  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">invert the masks   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">alphas  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">poisson-blend  </td><td class="markdownTableBodyNone">bool  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">false  </td><td class="markdownTableBodyNone">apply Poisson-filling to the <a class="el" href="namespaceULR.html">ULR</a> result   </td></tr>
</table>
<h3><a class="anchor" id="ulr_howToUse_run_uiOptions"></a>
UI options</h3>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000025">Todo:</a></b></dt><dd>Anything here ?</dd></dl>
<h2><a class="anchor" id="ulr_references"></a>
References</h2>
<p>[Buehler 2001] C. Buehler, M. Bosse, L. McMillan, S. Gortler, and M. Cohen. "Unstructured lumigraph
rendering." In Proceedings SIGGRAPH 2001, pp. 425-432. ACM, 2001. <a href="https://www.ics.uci.edu/~gopi/ICS280Win02/UnstructuredLumigraph.pdf">https://www.ics.uci.edu/~gopi/ICS280Win02/UnstructuredLumigraph.pdf</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
